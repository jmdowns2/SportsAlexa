import jp.classmethod.aws.gradle.lambda.AWSLambdaMigrateFunctionTask;

buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    classpath "jp.classmethod.aws:gradle-aws-plugin:0.+"
  }
}

apply plugin:'base'
apply plugin: "jp.classmethod.aws.lambda"

lambda {
    region = "us-east-1"
}


task zip(type: Zip) {
    from "lambda/"
    destinationDir file("build")
}

task deploy(type: AWSLambdaMigrateFunctionTask, dependsOn: zip) {
    functionName = "KentuckySports"

    role = "arn:aws:iam::${aws.accountId}:role/lambda_basic_execution"
    zipFile = zip.archivePath
    handler = "Sports.handler"
    timeout = 10
}

